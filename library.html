<!DOCTYPE html>
<head><meta charset="utf-8"><link rel='stylesheet' href='library.css'></head>
<body>
    <div id='header'>
        <h1>Library</h1>
    </div>
    <div id='cardHolder'>
        <button id='bookInserter'>Add a book</button>
    </div>
    <div id='formHolder'>
        <h2>Book information</h2>
        <form id='form'>
            <label for='title'>Title:</label>
            <input type='title' id='title' name='title' required>
            <label for='author'>Author:</label>
            <input type='author' id='author' name='author' required>
            <label for='pages'>Pages:</label>
            <input type='number' id='pages' name='pages' min='1' max='3000' required>
            
            <label>Read Status:</label>
            <label for='read'>
                Read
                <input type='radio' id='read' name='readStatus' value='Read'>
            </label>
            <label for='reading'>
                Reading
                <input type='radio' id='reading' name='readStatus' value='Reading'>
            </label>
            <label for='notRead'>
                Not read
                <input type='radio' id='notRead' name ='readStatus' value='Not read'>
            </label>
            <input type='submit' id='formSubmit' type='button'></input>
        </form>
    </div>

</body>
<script>
    let myLibrary = [
        {
            title : 'Harry Potter',
            author : 'J.K Rowling',
            pages : 650,
            isRead : 'Read'
        },
        {
            title : 'Harry Potter2',
            author : 'J.K Rowling',
            pages : 690,
            isRead : 'Reading'
        }      
    ];

    function Book(title, author, pages, read) {
        this.title = title;
        this.author = author;
        this.pages = pages;
        this.isRead = read;
    };

    function addBookToLibrary(book) {
        myLibrary.push(book);
    };

    const cardHolderDiv = document.querySelector('#cardHolder');

    

    function displayBook() {
        for (i=0; i < myLibrary.length; i++){
            let card = document.createElement('div');
            cardHolderDiv.appendChild(card);
            card.classList.add('card');
            let pTitle = document.createElement('p');
            let pAuthor= document.createElement('p');
            let pPages = document.createElement('p');
            let pRead = document.createElement('p');
            card.appendChild(pTitle);
            card.appendChild(pAuthor);
            card.appendChild(pPages);
            card.appendChild(pRead);
            pTitle.textContent = 'Title: ' + myLibrary[i].title;
            pAuthor.textContent = 'Author: ' + myLibrary[i].author;
            pPages.textContent = 'Pages: ' + myLibrary[i].pages;
            pRead.textContent = 'Read status: ' + myLibrary[i].isRead;
            const removeButton = document.createElement('button');
            removeButton.textContent = 'Delete book';
            card.appendChild(removeButton);
            removeButton.addEventListener('click', function(e){
                e.target.parentNode.remove();
            });
        }
    };
    
    let narnia = new Book('Narnia', 'CKLEWIS', 500, 'Reading');
    addBookToLibrary(narnia);

    let asoiaf = new Book('Game of Thrones', 'George R. R. Martin', 720, 'Read');
    addBookToLibrary(asoiaf);

    
    const formHolderDiv = document.querySelector('#formHolder');
    const form = document.querySelector('#form');
    form.addEventListener('submit', function(e){
        e.preventDefault(); //to stop form from submitting and refreshing page
        let title1 = document.querySelector('#title').value;
        let author1 = document.querySelector('#author').value;
        let pages1 = document.querySelector('#pages').value;
        let readStatus1 = document.querySelector('input[name = readStatus]:checked').value;                           
        let book1 = new Book(title1, author1 ,pages1, readStatus1);
        addBookToLibrary(book1);

        let card = document.createElement('div');
        cardHolderDiv.appendChild(card);
        card.classList.add('card');
        let pTitle = document.createElement('p');
        let pAuthor= document.createElement('p');
        let pPages = document.createElement('p');
        let pRead = document.createElement('p');
        card.appendChild(pTitle);
        card.appendChild(pAuthor);
        card.appendChild(pPages);
        card.appendChild(pRead);
        pTitle.textContent = 'Title: ' + book1.title;
        pAuthor.textContent = 'Author: ' + book1.author;
        pPages.textContent = 'Pages: ' + book1.pages;
        pRead.textContent = 'Read status: ' + book1.isRead;
        const removeButton = document.createElement('button');
        removeButton.textContent = 'Delete book';
        card.appendChild(removeButton);
        removeButton.addEventListener('click', function(e){
            e.target.parentNode.remove();
        });

        formHolderDiv.style.display = 'none';
    });
    
    const addBookButton = document.querySelector('#bookInserter');
    addBookButton.addEventListener('click', function(){                 //use a show form method, where the form exists, but the button brings the form to a higher z index and visible
        formHolderDiv.style.display = 'block';
    });

    

    
    

    displayBook();

</script>

<!-- to do: create form, display form through button click, make the thing look good (look for online designs that are clean cos its important), add semantic HTML tags to make
it a habit 
add event listener on window to exit form
can make for loop into an object instead of createelemnt 4 times
also have a look at previous object tutorials to see if im using the techniques -->